function countDateCalendarManner(d){let day=parseInt(d-1);if(day<0){return null}let DayInGrandCycle=day%146097;let DayInMiddleCycle;let DayInNormalCycle;if(DayInGrandCycle<36525){DayInMiddleCycle=DayInGrandCycle%1461}else if(DayInGrandCycle<73049){DayInMiddleCycle=(DayInGrandCycle+1)%1461}else if(DayInGrandCycle<109573){DayInMiddleCycle=(DayInGrandCycle+2)%1461}else{DayInMiddleCycle=(DayInGrandCycle+3)%1461}if(DayInMiddleCycle==1460){if(DayInGrandCycle==36524||DayInGrandCycle==73048||DayInGrandCycle==109572){DayInNormalCycle=0}else{DayInNormalCycle=365}}else{DayInNormalCycle=DayInMiddleCycle%365}let Day=DayInNormalCycle;let YearByGrandCycle=Math.floor(day/146097)*400;let YearByMiddleCycle;let YearByNormalCycle;if(DayInMiddleCycle==1460&&DayInNormalCycle==0){YearByMiddleCycle=Math.floor(DayInGrandCycle/1461)*4+1}else if(DayInMiddleCycle==0&&DayInNormalCycle==0&&DayInGrandCycle>=36525){YearByMiddleCycle=(Math.floor(DayInGrandCycle/1461)+1)*4}else{YearByMiddleCycle=Math.floor(DayInGrandCycle/1461)*4}YearByNormalCycle=(DayInMiddleCycle==1460)?3:Math.floor(DayInMiddleCycle/365);let Year=YearByGrandCycle+YearByMiddleCycle+YearByNormalCycle;let YearStr='';let LeapYear=0;if(day>=365){YearStr=Year+' 年 '}if(Year%4==3&&Year%400!=99&&Year%400!=199&&Year%400!=299){LeapYear=1}let DaysInMonth=[31,28,31,30,31,30,31,31,30,31,30,31];if(LeapYear==1){DaysInMonth[1]=29}let AddUpDays=[0];let addUp=0;for(let i=0;i<DaysInMonth.length;i++){addUp+=DaysInMonth[i];AddUpDays[i+1]=addUp}switch(true){case Day<AddUpDays[0]:default:break;case Day<AddUpDays[1]:return YearStr+'1 月 '+(Day+1)+' 日';case Day<AddUpDays[2]:return YearStr+'2 月 '+(Day-AddUpDays[1]+1)+' 日';case Day<AddUpDays[3]:return YearStr+'3 月 '+(Day-AddUpDays[2]+1)+' 日';case Day<AddUpDays[4]:return YearStr+'4 月 '+(Day-AddUpDays[3]+1)+' 日';case Day<AddUpDays[5]:return YearStr+'5 月 '+(Day-AddUpDays[4]+1)+' 日';case Day<AddUpDays[6]:return YearStr+'6 月 '+(Day-AddUpDays[5]+1)+' 日';case Day<AddUpDays[7]:return YearStr+'7 月 '+(Day-AddUpDays[6]+1)+' 日';case Day<AddUpDays[8]:return YearStr+'8 月 '+(Day-AddUpDays[7]+1)+' 日';case Day<AddUpDays[9]:return YearStr+'9 月 '+(Day-AddUpDays[8]+1)+' 日';case Day<AddUpDays[10]:return YearStr+'10 月 '+(Day-AddUpDays[9]+1)+' 日';case Day<AddUpDays[11]:return YearStr+'11 月 '+(Day-AddUpDays[10]+1)+' 日';case Day<AddUpDays[12]:return YearStr+'12 月 '+(Day-AddUpDays[11]+1)+' 日'}}function dateFormat(time=new Date(),ms=false){let date=new Date(time),y=date.getFullYear(),m=padding(date.getMonth()+1,'0',2),d=padding(date.getDate(),'0',2),h=padding(date.getHours(),'0',2),i=padding(date.getMinutes(),'0',2),s=padding(date.getSeconds(),'0',2);if(!ms){return y+'-'+m+'-'+d+' '+h+':'+i+':'+s}else{let u=padding(date.getMilliseconds(),'0',3);return y+'-'+m+'-'+d+' '+h+':'+i+':'+s+'.'+u}}function dateStamp(date=dateFormat()){if(date.length==19){if(/\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01]) [0-5]\d:[0-5]\d:[0-5]\d/.test(date)){return new Date(date).getTime()}}else if(date.length>20&&date.length<24){if(/\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01]) [0-5]\d:[0-5]\d:[0-5]\d\.\d{1,3}/.test(date)){return new Date(date).getTime()}}}function degFull(degree,minute,second){try{if(second>=60||second<0){throw"Second value must be between 0 and 59.999...";}else if(minute>=60||minute<0){throw"Minute value must be between 0 and 59.999...";}let p=(degree>=0)?1:-1,sim=parseFloat((second/60).toFixed(12)),mid=parseFloat(((sim+minute)/60).toFixed(12)),d=parseFloat((mid+Math.abs(degree)).toFixed(12));return d*p}catch(err){console.error(err)}}function degMinSec(degree){let p=(degree>=0)?1:-1,df=Math.abs(degree),d=Math.floor(df),mf=parseFloat(((df-d)*60).toFixed(10)),m=Math.floor(mf),sf=parseFloat(((mf-m)*60).toFixed(10));return{degree:d*p,minute:m,second:sf}}function getParameter(param){let search=location.search.substr(1),paramString=search.split('&'),paramParse,key,val,paramObj={};if(param===undefined){if(search.length>1){for(let i=0;i<paramString.length;i++){paramParse=paramString[i].split('=');key=paramParse[0];val=paramParse[1];paramObj[key]=val}return paramObj}else{return{}}}else{if(search.length>1){for(let i=0;i<paramString.length;i++){paramParse=paramString[i].split('=');key=paramParse[0];val=paramParse[1];if(key==param){return val}}}else{return null}}}function packParameter(paramObj){let keys=Object.keys(paramObj),paramArray=[],paramString='';keys.forEach(function(key){paramArray.push(`${key}=${paramObj[key]}`)});if(paramArray.length>0){paramString='?'+paramArray.join('&')}return paramString}function padding(str,char,num,direction='left'){let dir=direction.toLowerCase(),i=0,dif=0,tar='',len=str.toString().length;if(len<num){dif=num-len;for(i=0;i<dif;i++){tar+=char}switch(dir){default:case'left':case'front':case'before':case'default':tar+=str.toString();break;case'right':case'after':case'back':tar=str.toString()+tar;break}return tar}return str}function randNum(floor=0,ceil=1){try{if(ceil<floor){throw"Ceil is less than floor!";}let rand=Math.random()*(ceil-floor);return floor+rand}catch(err){console.error(err)}}function randStr(radix,len,caps=false){if(radix<2||radix>36){console.log("The radix must be between 2 and 36.");return undefined}else{let str="",s=Math.random().toString(radix).split(".")[1];while(s.length<len){s+=Math.random().toString(radix).split(".")[1]}s=s.substring(0,len);for(let i=0;i<s.length;i++){if(/[a-z]/.test(s[i])&&caps&&parseInt(Math.random()*2)){str+=s[i].toUpperCase()}else{str+=s[i]}}return str}}function formDateFormat(date,s=0,ms=0,milli=false){const ymdhis=/^\d{4}-(0[1-9]|1[012])-(0[1-9]|[12]\d|3[01]) ([01]\d|2[0-3]):([0-5]\d):([0-5]\d)$/,ymdthi=/^\d{4}-(0[1-9]|1[012])-(0[1-9]|[12]\d|3[01])T([01]\d|2[0-3]):([0-5]\d)$/,ymdthis=/^\d{4}-(0[1-9]|1[012])-(0[1-9]|[12]\d|3[01])T([01]\d|2[0-3]):([0-5]\d):([0-5]\d)$/,ymdthisu=/^\d{4}-(0[1-9]|1[012])-(0[1-9]|[12]\d|3[01])T([01]\d|2[0-3]):([0-5]\d):([0-5]\d)\.\d{3}$/;let snum=parseInt(s),msnum=parseInt(ms),second,millisecond;switch(true){case(snum>=60):second='59';break;case(snum>=0):second=padding(snum,'0',2);break;default:second='00';break}switch(true){case(msnum>=1000):millisecond='999';break;case(msnum>=0):millisecond=padding(msnum,'0',3);break;default:millisecond='000';break}switch(milli){case true:switch(true){case(ymdhis.test(date)):return date+'.'+millisecond;case(ymdthi.test(date)):return date.replace('T',' ')+':'+second+'.'+millisecond;case(ymdthis.test(date)):return date.replace('T',' ')+'.'+millisecond;case(ymdthisu.test(date)):return date.replace('T',' ');default:return null}break;default:switch(true){case(ymdhis.test(date)):return date;case(ymdthi.test(date)):return date.replace('T',' ')+':'+second;case(ymdthis.test(date)):return date.replace('T',' ');case(ymdthisu.test(date)):return date.replace('T',' ').replace(/\.\d{3}/,'');default:return null}break}}function parseDate(dateString){const CE=/^(CE|AD|\+)?\d{1,}-(0[1-9]|1[012])-(0[1-9]|[12]\d|3[01])( ([01]\d|2[0-3]):([0-5]\d):([0-5]\d))?$/,BCE=/^(BCE|BC|-)?\d{1,}-(0[1-9]|1[012])-(0[1-9]|[12]\d|3[01])( ([01]\d|2[0-3]):([0-5]\d):([0-5]\d))?$/;let mode,date='',year,month,day,time='',hour,minute,second;if(CE.test(dateString)){mode='CE'}else if(BCE.test(dateString)){mode='BCE'}else{mode='Invalid'}if(mode!=='Invalid'){let string=dateString.split(' ');date=string[0];let s=0;if(date.indexOf('-')==0){s++}if(s==0){date=date.replace(/(BCE|BC|CE|AD)/,'');year=parseInt(date.split('-')[s++])}else{year=parseInt('-'+date.split('-')[s++])}month=parseInt(date.split('-')[s++])-1;day=parseInt(date.split('-')[s++]);if(string.length>1){time=string[1];hour=parseInt(time.split(':')[0]);minute=parseInt(time.split(':')[1]);second=parseInt(time.split(':')[2])}else{hour=0;minute=0;second=0}}if(typeof year!=='undefined'&&typeof month!=='undefined'&&typeof day!=='undefined'&&typeof hour!=='undefined'&&typeof minute!=='undefined'&&typeof second!=='undefined'){let dateObj=new Date(year,month,day,hour,minute,second);dateObj.setFullYear(year);return dateObj}else{return new Date()}}